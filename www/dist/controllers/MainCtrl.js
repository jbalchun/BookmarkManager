var app=angular.module("Bookmarks.MainCtrl",[]);app.controller("MainCtrl",["$scope","BookmarkFactory","DataService","$rootScope","$ionicPlatform","$ionicPopup",function(o,a,e,t,r,n){o.viewBookmark={url:"",tags:[],category:"",descr:""},o.searchText="",o.tags=["Food","Education"],r.ready(function(){o.bookmarks=e.getBookmarks(),console.log("namer",t.$storage.username),0===t.$storage.username.length&&n.alert({title:"Log in or Register with the top right icon to use pagelocker",buttons:[{text:"<b>Ok</b>",type:"button-balanced",onTap:function(o){}}]}).then(function(o){}),t.$storage.username.length>0&&(t.username=t.$storage.username,e.cloudLoad())}),o.requestTagAndCats=function(){o.categories=e.getCategories(),o.tags=e.getTags()},o.addBookmark=function(){var t=o.viewBookmark;console.log(t);var r=a.build(t);o.bookmarks.unshift(r),s(),k(t.tags),e.setBookmarks(o.bookmarks)},o.removeBookmark=function(a){o.bookmarks.splice(a,1),e.setBookmarks(o.bookmarks)},o.editBookmark=function(a){var t=o.bookmarks[a];o.bookmarks[a]=t,t.editing=!1,e.setBookmarks(o.bookmarks)},o.$on("cat-filter",function(a,e){o.searchText=e.text}),o.$on("cloud-load",function(){o.bookmarks=e.getBookmarks()}),o.$on("clear-filter",function(){o.searchText=""}),o.$on("logged-in",function(){console.log("cloud loading"),console.log(e.getBookmarks(),"before"),e.cloudLoad(),console.log(e.getBookmarks(),"after"),o.bookmarks=e.getBookmarks(),console.log(o.bookmarks,"bookmarks")});var s=function(){o.viewBookmark={url:"",descr:"",tags:[],category:""}},k=function(o){e.saveTags(o)}}]);